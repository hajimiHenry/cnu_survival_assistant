# 首都师范大学在校生生存助手 - 用户使用手册

## 目录

1. [系统简介](#系统简介)
2. [快速启动](#快速启动)
3. [界面介绍](#界面介绍)
4. [基本使用](#基本使用)
5. [API 配置](#api-配置)
6. [常见问题](#常见问题)

---

## 系统简介

首都师范大学在校生生存助手是一个智能问答系统，可以帮助你：

- **查规定** - 查询学校的规章制度（学分、绩点、处分、奖学金等）
- **问流程** - 询问办事流程（缓考、休学、转专业、补办学生证等）
- **求经验** - 获取学习生活建议（选课、考试、社团等）
- **要模板** - 获取文本模板（请假邮件、申请书等）

系统会自动记住你的重要信息（如挂科情况、转专业意向等），在后续对话中提供个性化建议。

---

## 快速启动

### Windows 用户

1. 找到项目文件夹中的 `启动Web界面.bat` 文件
2. 双击运行
3. 等待几秒钟，浏览器会自动打开
4. 如果是首次使用，需要先配置 API（见 [API 配置](#api-配置)）

### 手动启动

```bash
# 激活虚拟环境
.venv\Scripts\activate

# 启动 Web 服务
python run_web.py
```

然后在浏览器中访问：http://localhost:18080

---

## 界面介绍

### 整体布局

```
┌─────────────────────────────────────────────────────────┐
│  ☰  首都师范大学在校生生存助手              ⚙ 设置按钮 │  ← 顶部栏
├──────────────┬──────────────────────────────────────────┤
│              │                                          │
│   侧边栏     │              聊天区域                    │
│              │                                          │
│  · 用户信息  │    你好，同学！                          │
│  · 长期记忆  │    我是首都师范大学在校生生存助手...     │
│  · 操作按钮  │                                          │
│              │    [示例问题按钮]                        │
│              │                                          │
├──────────────┴──────────────────────────────────────────┤
│  [输入框...                                    ] [发送] │  ← 输入区
└─────────────────────────────────────────────────────────┘
```

### 侧边栏功能

#### 用户信息

填写你的基本信息，帮助系统提供更针对性的回答：

- **年级**：如 "大一"、"大二"、"研一" 等
- **学院**：如 "信息工程学院"、"文学院" 等
- **专业**：如 "计算机科学与技术"、"汉语言文学" 等

填写后点击「保存信息」按钮。

#### 长期记忆

系统会自动从对话中提取重要信息并记住，你也可以：

- 查看已记录的信息
- 手动添加新记忆（输入后点击 + 按钮）
- 删除不需要的记忆（点击 × 按钮）

#### 操作按钮

- **清空对话历史**：删除所有聊天记录，重新开始
- **清空所有记忆**：删除所有长期记忆

### 聊天区域

- 显示对话历史
- 每条消息显示时间和意图标签
- 新记忆提示会在助手回复下方显示

### 设置面板

点击右上角 ⚙ 按钮打开，用于配置 API 连接。

---

## 基本使用

### 提问方式

直接在输入框中输入你的问题，例如：

- "挂科了会怎么样？"
- "转专业需要什么条件？"
- "怎么申请奖学金？"
- "帮我写一封请假邮件"

### 快捷操作

- **Enter 键**：发送消息
- **Shift + Enter**：换行（输入多行内容）
- **点击示例问题**：快速提问常见问题
- **Esc 键**：关闭设置面板

### 示例对话

```
你: 我高数挂了，怎么补考？

助手: 根据首都师范大学的规定：

1. 必修课程总评成绩不及格的，学生必须在下一年级选课并跟班重修
2. 重修课程按正常考试计算成绩
3. 如果重修后仍不及格，需要继续重修直到通过

建议：
- 尽快联系任课老师了解重修安排
- 关注教务系统的选课通知
- 认真准备重修考试

🧠 系统已自动记录：
   - 高等数学挂科
```

### 意图识别

系统会自动识别你的问题类型：

| 意图标签 | 说明 |
|----------|------|
| 查规定 | 询问学校规章制度 |
| 问流程 | 询问办事流程 |
| 求经验 | 寻求建议和经验 |
| 要模板 | 需要文本模板 |
| 闲聊 | 日常对话 |

---

## API 配置

### 为什么需要配置 API？

本系统使用 AI 大语言模型来回答问题，需要连接 API 服务才能工作。

### 配置步骤

1. 点击右上角 ⚙ 设置按钮
2. 填写以下信息：

   | 字段 | 说明 | 示例 |
   |------|------|------|
   | API 地址 | API 服务的地址 | `https://api.openai.com/v1` |
   | API 密钥 | 你的 API 密钥 | `sk-xxx...` |
   | 模型名称 | 使用的模型 | `gpt-4o-mini` |

3. 点击「测试连接」验证配置是否正确
4. 显示绿色 ✓ 表示连接成功
5. 点击「保存配置」

### 支持的 API 服务

- **OpenAI 官方 API**
  - 地址：`https://api.openai.com/v1`
  - 模型：`gpt-4o-mini`、`gpt-4o` 等

- **各类中转站/公益站**
  - 使用中转站提供的地址和密钥
  - 模型名称根据中转站支持的模型填写

- **DeepSeek**
  - 推荐模型：`deepseek-chat`（性价比高）

- **本地模型（Ollama）**
  - 地址：`http://localhost:11434/v1`
  - 模型：`llama3`、`qwen2` 等

### 配置状态说明

| 状态 | 含义 |
|------|------|
| ✓ API 已配置 | 配置完成，可以正常使用 |
| ⚠ 请填写 API 配置 | 需要填写配置信息 |
| ✗ 加载配置失败 | 服务连接异常 |

---

## 常见问题

### Q: 启动后浏览器显示无法访问？

**A:** 等待几秒钟让服务完全启动，然后刷新页面。如果仍然无法访问，检查：
- 端口 18080 是否被其他程序占用
- 是否在项目目录下运行

### Q: 发送消息后一直显示"正在输入..."？

**A:** 可能是 API 配置问题，请：
1. 打开设置面板检查 API 配置
2. 点击「测试连接」验证
3. 确保 API 密钥有效且有余额

### Q: 如何更换 API？

**A:**
1. 点击右上角 ⚙ 按钮
2. 修改 API 地址、密钥、模型名称
3. 测试连接
4. 保存配置

### Q: 记忆功能是什么？

**A:** 系统会自动从对话中识别重要信息（如挂科、转专业意向等），并在后续对话中参考这些信息提供更个性化的建议。

### Q: 如何清除我的数据？

**A:**
- 清空对话：点击侧边栏「清空对话历史」
- 清空记忆：点击侧边栏「清空所有记忆」
- 完全清除：删除项目目录下的 `user_data.json` 文件

### Q: 手机上可以使用吗？

**A:** 可以。如果手机和电脑在同一网络：
1. 在电脑上启动服务
2. 手机浏览器访问 `http://电脑IP:18080`
3. 界面会自动适配移动端

---

## 联系与反馈

如有问题或建议，请在 GitHub 提交 Issue。

祝你在首都师范大学的学习生活顺利！
